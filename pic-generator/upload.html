<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
		<title>Examples</title>
		<meta name="description" content="">
		<meta name="keywords" content="">
		<link href="" rel="stylesheet">
		<style>
			.pic{width: 640px;height: 480px;overflow: hidden;border: 1px solid #ccc;}
			.pic-holder{width: 640px;height: 420px;overflow: hidden;}
			.preview{max-width: 100%}
			.write-txt{background: #000;height: 60px;color: #fff;text-align: center;padding-top:14px;font-size: 20px;}
			.write-txt input{background: #000;color:#fff;border: none;border-bottom:1px solid #ccc;font-size: 20px;width: 120px;text-align: center;}
			fieldset{width: 660px;}
		</style>
		<script src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.9.1.js "></script>
		<script src="http://ajax.aspnetcdn.com/ajax/knockout/knockout-3.0.0.js "></script>
		<script src="http://html2canvas.hertzen.com/build/html2canvas.js"></script>
		<script>
			
			$(function (){
		
		function format_float(num, pos)
		{
		var size = Math.pow(10, pos);
		return Math.round(num * size) / size;
		}
		
		function preview(input) {
		
		if (input.files && input.files[0]) {
		var reader = new FileReader();
		
		reader.onload = function (e) {
		$('.preview').attr('src', e.target.result);
		}
		
		reader.readAsDataURL(input.files[0]);
		}
		}
		
		$("body").on("change", ".upl", function (){
		preview(this);
		})
		
		})
		</script>
	</head>
	<body>
		<form>
			<p>1.選擇圖片：<input type='file' class="upl"></p>
			<p>2.預覽：</p>
			<div class="pic">
			<div class="pic-holder">
				<img class="preview">
				</div>
				<div class="write-txt">
					我是
					<input type="text">
					我支持婚姻平權
				</div>
			</div>
		</form>
		<p>3.產生圖檔：<input type="button" value="產生圖檔" /></p>
		<p>圖檔產生後，請於圖片上按右鍵另存圖片下載</p>
		<fieldset>
			<legend>圖檔</legend>
			<div>
			</div>
		</fieldset>
		<script>
		$(":button").click(function() {
		html2canvas($(".pic")[0], {
		onrendered: function(canvas) {
		var $div = $("fieldset div");
		$div.empty();
		$("<img />", { src: canvas.toDataURL("image/png") }).appendTo($div);
		}
		});
		});
		</script>
	</body>
</html>